# CyberSentinel Configuration

# ClickHouse Settings
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_DATABASE=cybersentinel
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=

# Neo4j Settings
NEO4J_URI=neo4j://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# Message Bus Settings
NATS_URL=nats://localhost:4222
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
USE_KAFKA=false  # Set to true to use Kafka instead of NATS

# JetStream Settings (used by JetStreamBus adapter)
JS_STREAM_PREFIX=CS
JS_DURABLE_NAME=cybersentinel
JS_MAX_ACK_PENDING=256          # Max in-flight messages (backpressure)
JS_MAX_DELIVER=5                # DLQ after N delivery attempts
JS_ACK_WAIT_SECONDS=30
JS_RETRY_BASE_DELAY=1.0        # Exponential backoff base (seconds)
JS_RETRY_MAX_DELAY=30.0        # Backoff cap (seconds)

# Redis Settings (for LangGraph state)
REDIS_URL=redis://localhost:6379

# Vector Store Settings
# Backend: auto-resolved when unset. Set VECTOR_STORE=pinecone or USE_PINECONE=true for cloud.
# Valid values: faiss, pinecone
VECTOR_STORE=
FAISS_INDEX_PATH=data/faiss_index
VECTOR_DIMENSION=768
USE_PINECONE=false  # Legacy toggle — prefer VECTOR_STORE=pinecone
PINECONE_API_KEY=
PINECONE_INDEX_NAME=cybersentinel
PINECONE_NAMESPACE=

# Embedding Provider
# Auto-resolved when unset: OPENAI_API_KEY → openai, else sentence_transformers, else mock.
# Valid values: openai, sentence_transformers, mock
EMBEDDINGS_PROVIDER=

# Reranker
# Auto-resolved when unset: cross_encoder if sentence-transformers installed, else none.
# Valid values: cross_encoder, mock, none
RERANKER=

# OpenAI Settings (for embeddings and LLM)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_MAX_TOKENS=4000

# Alternative LLM Settings
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Local LLM Settings (optional)
LOCAL_LLM_URL=http://localhost:8080
USE_LOCAL_LLM=false

# Agent Settings
AGENT_MAX_TOKENS=10000
AGENT_TIMEOUT_SECONDS=300
SCOUT_ENABLED=true
ANALYST_ENABLED=true
RESPONDER_ENABLED=true

# OPA Policy Settings
OPA_SERVER_URL=http://localhost:8181
OPA_POLICY_PATH=agents/orchestrator/policies/opa

# Observability Settings
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=cybersentinel
ENABLE_TRACING=false
ENABLE_METRICS=false

# Security Settings
SECRETS_ENCRYPTION_KEY=  # Generate with: python -c "import secrets; print(secrets.token_hex(32))"
MAX_FILE_SIZE_MB=100
ALLOWED_DOMAINS=*.local,*.internal
LOG_LEVEL=INFO

# Evaluation Settings
EVAL_SCENARIOS_PATH=eval/suite/scenarios.yml
EVAL_OUTPUT_PATH=eval/reports
EVAL_MIN_TPR=0.8
EVAL_MAX_FPR=0.01
EVAL_TIMEOUT_MINUTES=30

# Red Team Settings
RED_BASELINE_ENABLED=true
RED_RL_ENABLED=false
RED_EPISODE_LENGTH=100
RED_LEARNING_RATE=0.001

# UI Settings
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=  # Generate with: openssl rand -base64 32

# Development Settings
DEBUG=false
DEV_MODE=false
MOCK_EXTERNAL_APIS=false  # Set to true for offline testing